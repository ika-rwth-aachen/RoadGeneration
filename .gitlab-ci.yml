# Based on image by raabf: https://github.com/raabf/dockertex
image:
  name: raabf/latex-versions:texlive2018
# Only one stage here, latex
stages:
  - latex
# Display the used version beforehand
before_script:
  - lsb_release --all
  - latex --version


build_root:
  stage: latex
  tags:
    - docker
  script:
    - cd paper/tex
    - pdflatex -interaction=nonstopmode root.tex
    - bibtex root
    - pdflatex -interaction=nonstopmode root.tex
    - pdflatex -interaction=nonstopmode root.tex
  artifacts:
    paths:
      - paper/tex/root.pdf
    name: "newest_version"
    expire_in: 1 week
  only:
    - paper
